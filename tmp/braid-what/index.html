<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>An Interpretation of Braid</title><link rel="stylesheet" href="/styles.css"><link rel="stylesheet" href="/named_assets/katex.min.css"><script type="module" src="/named_assets/floating-ui.core.min.js"></script><script type="module" src="/named_assets/floating-ui.dom.min.js"></script><script type="module" src="/named_assets/tooltips.js"></script><script type="module" src="/named_assets/previews.js"></script><script type="module" src="/named_assets/active_toc.js"></script></head><body class="container_main bg"><div><main><h1 id="braid_what" class="wide"><a href="#braid_what">An Interpretation of Braid</a></h1><nav class="toc"><ol><li class="toc_top" data-hsection="braid_what" data-hlevel="1"><a href="/braid-what\index.html#braid_what" class="internal">(Top)</a></li><div class="toc_section"><li class="toc_heading" data-hsection="braid_basics" data-hlevel="2"><a href="/braid-what\index.html#braid_basics" class="internal">Basic Model</a><ol class="toc_children"></ol></li></div><div class="toc_section"><li class="toc_heading" data-hsection="map_crdt" data-hlevel="2"><a href="/braid-what\index.html#map_crdt" class="internal">Example Map CRDT</a><ol class="toc_children"></ol></li></div><div class="toc_section"><li class="toc_heading" data-hsection="braid_matter" data-hlevel="2"><a href="/braid-what\index.html#braid_matter" class="internal">Matter</a><ol class="toc_children"><div class="toc_section"><li class="toc_heading" data-hsection="maintaining_acks" data-hlevel="3"><a href="/braid-what\index.html#maintaining_acks" class="internal">Maintaining Acks</a><ol class="toc_children"></ol></li></div><div class="toc_section"><li class="toc_heading" data-hsection="pruning" data-hlevel="3"><a href="/braid-what\index.html#pruning" class="internal">Pruning State</a><ol class="toc_children"></ol></li></div></ol></li></div><div class="toc_section"><li class="toc_heading" data-hsection="antimatter" data-hlevel="2"><a href="/braid-what\index.html#antimatter" class="internal">Antimatter</a><ol class="toc_children"></ol></li></div></ol></nav><p class="informative"><a href="https://braid.org/" class="external">Braid</a> is exciting! But: the <a href="https://braid.org/demo/interact" class="external">explanation of the braid datastructure</a> makes some very strong claims about generalizing CRDTs. I'm not quite ready to follow those, my interpretation of the material is that braids cover a whole class of CRDTs, but not all of them. Since the material on the braid website is rather informal, I'm trying to give a more precise formulation in this document. Not a long time has passed between me first reading the braid docs and me writing this, so please take everything here with a grain of salt.</p><p class="informative">Apologies for the focus on formalization over explanations, but this text is primarily an exercise for myself to reach a better understanding of the space.</p><h2 id="braid_basics"><a href="#braid_basics">Basic Model</a></h2><p class="informative">Goal: to capture the braid model of patches, time, and space as a family of state-based CRDTs (i.e., join semi-lattices).</p><p class="informative">All graph terminology (including the word “graph” itself) refers to directed concepts, unless explicitly stated otherwise.</p><p class="informative"><span class="aside"><a data-preview="/previews/6d8314549e5962609691785696d96bf2fe0f20fcb1951918ddce5d700b922656.html" class="internal ref type" href="/braid-what\index.html#Id">Id</a> is the set of vertices of braid's time DAG, i.e., what braid calls a “version”.</span>Let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="enclosing normal_text type"><span class="enclosing" id="Id"><span class="enclosing" data-preview="/previews/6d8314549e5962609691785696d96bf2fe0f20fcb1951918ddce5d700b922656.html"><a href="/braid-what\index.html#Id"><span class="mord text"><span class="mord">Id</span></span></a></span></span></span></span></span></span> be an infinite set of version ids. In the following, whenever we select a specific <a data-preview="/previews/6d8314549e5962609691785696d96bf2fe0f20fcb1951918ddce5d700b922656.html" class="internal ref type" href="/braid-what\index.html#Id">Id</a>, we assume it to be completely unique: it has not been selected before, and it will not be selected again. In practice, we can use random selection from a large set to approximate this behavior.</p><p class="informative"><span class="aside"><a data-preview="/previews/fd6930a9f56fda9ea4cc98c27290a14e8b5aa0fd18b4e63d92de5b4a05da05ed.html" class="internal ref type" href="/braid-what\index.html#D">D</a> corresponds to the type of strings in the braid visualizations on the braid website.</span>Let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing normal_text type"><span class="enclosing" id="D"><span class="enclosing" data-preview="/previews/fd6930a9f56fda9ea4cc98c27290a14e8b5aa0fd18b4e63d92de5b4a05da05ed.html"><a href="/braid-what\index.html#D"><span class="mord text"><span class="mord">D</span></span></a></span></span></span></span></span></span> be an arbitrary domain (i.e., a non-empty set). This type is what a user would interact with, but for the formalization it is pretty uninteresting; it need not satisfy any properties beyond being non-empty.</p><p class="informative"><span class="aside"><a data-preview="/previews/bdf8d407010c2d41f3f438c55f60179beff233b612fe16dd75fedfa74db8d4a6.html" class="internal ref type" href="/braid-what\index.html#P">P</a> corresponds to the “patches” of braid, but without the purely intuitive notion of space or regions therein.</span>Let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing normal_text type"><span class="enclosing" id="P"><span class="enclosing" data-preview="/previews/bdf8d407010c2d41f3f438c55f60179beff233b612fe16dd75fedfa74db8d4a6.html"><a href="/braid-what\index.html#P"><span class="mord text"><span class="mord">P</span></span></a></span></span></span></span></span></span> be a set of patches such that there exist<ul><li><span class="aside">Interestingly enough, this function need not be associative or commutative.</span>a binary function <dfn><a id="pp_to_p" data-preview="/previews/ed4c5f07be820ddd01e14b3693e8fb7332de4073f375541be3094a1ae1d5c1aa.html" class="internal fn" href="/braid-what\index.html#pp_to_p">pp_to_p</a></dfn> that maps any two patches to another patch,</li><li><span class="aside">This is a three-way merge.</span>a ternary function <dfn><a id="ppp_to_p" data-preview="/previews/5d8230b2168a3f95def83ec813337391e384ae98326c67c5a4c0d7515b584bde.html" class="internal fn" href="/braid-what\index.html#ppp_to_p">ppp_to_p</a></dfn> that maps any three patches to another patch, such that permuting the first and second argument does not change the result,</li><li><span class="aside">We need this to reduce any braid to a single value. If the three-way merges do not need to distinguish between the ordering of their arguments, and if <a data-preview="/previews/ed4c5f07be820ddd01e14b3693e8fb7332de4073f375541be3094a1ae1d5c1aa.html" class="internal ref fn" href="/braid-what\index.html#pp_to_p">pp_to_p</a> can be restricted to being associative and commutative, then both <a data-preview="/previews/5d8230b2168a3f95def83ec813337391e384ae98326c67c5a4c0d7515b584bde.html" class="internal ref fn" href="/braid-what\index.html#ppp_to_p">ppp_to_p</a> and <a data-preview="/previews/1211beed791bb0fc986626b101d9bcfda1ceda05c04ba31cc384ea2a4b65beef.html" class="internal ref fn" href="/braid-what\index.html#many_ps_to_p">many_ps_to_p</a> can be removed. I kept the more general version because I was not sure whether braid wants to break symmetry occasionally. If I was designing from scratch, I'd probably require only a single, binary, associative, and commutative function.</span>a function <dfn><a id="many_ps_to_p" data-preview="/previews/1211beed791bb0fc986626b101d9bcfda1ceda05c04ba31cc384ea2a4b65beef.html" class="internal fn" href="/braid-what\index.html#many_ps_to_p">many_ps_to_p</a></dfn> that maps any non-empty set of patches to another patch, and</li><li>a function <dfn><a id="p_to_d" data-preview="/previews/fc5598a7c3263be8f63ff27e586d245b72c4860110557ffeacce6756797a5524.html" class="internal fn" href="/braid-what\index.html#p_to_d">p_to_d</a></dfn> that maps a possibly complicated patch to a concrete domain value.</li></ul></p><p class="informative">A <dfn><a id="Braid" data-preview="/previews/892cedf0feb82b2594cb68f79a9ec6ce62a4508dc2250b7668ec4b1088b27296.html" class="internal type" href="/braid-what\index.html#Braid">Braid</a></dfn> is a non-empty, finite, labeled DAG, whose vertices are a subset of <a data-preview="/previews/6d8314549e5962609691785696d96bf2fe0f20fcb1951918ddce5d700b922656.html" class="internal ref type" href="/braid-what\index.html#Id">Id</a>, whose vertices have an in-degree of at most two, and whose labels are in <a data-preview="/previews/bdf8d407010c2d41f3f438c55f60179beff233b612fe16dd75fedfa74db8d4a6.html" class="internal ref type" href="/braid-what\index.html#P">P</a>.</p><p class="informative">To reduce any <a data-preview="/previews/892cedf0feb82b2594cb68f79a9ec6ce62a4508dc2250b7668ec4b1088b27296.html" class="internal ref type" href="/braid-what\index.html#Braid">Braid</a> to a single patch, we first define a function <dfn><a id="vertex_to_p" data-preview="/previews/92348e7b66fcb7b2c54b30545edde7cdedb3bee901968f25b38a25560c6cf81f.html" class="internal fn" href="/braid-what\index.html#vertex_to_p">vertex_to_p</a></dfn> that maps<ul><li>any source vertex to its label,</li><li>any vertex <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> with a single predecessor <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span> to <a data-preview="/previews/ed4c5f07be820ddd01e14b3693e8fb7332de4073f375541be3094a1ae1d5c1aa.html" class="internal ref fn" href="/braid-what\index.html#pp_to_p">pp_to_p</a><span class="hl_punct">(</span><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span><span class="hl_punct">, </span><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span><span class="hl_punct">)</span>, and</li><li>any vertex <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> with a two predecessors <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span> and <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span> to <a data-preview="/previews/5d8230b2168a3f95def83ec813337391e384ae98326c67c5a4c0d7515b584bde.html" class="internal ref fn" href="/braid-what\index.html#ppp_to_p">ppp_to_p</a><span class="hl_punct">(</span><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span><span class="hl_punct">, </span><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span><span class="hl_punct">, </span><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span><span class="hl_punct">)</span>.</li></ul>We can then define <dfn><a id="braid_to_p" data-preview="/previews/3cccdbc5946adfbcde289a15e4d1c8d2ac80c5956e0e1559793cfca36ab249a9.html" class="internal fn" href="/braid-what\index.html#braid_to_p">braid_to_p</a></dfn> as <a data-preview="/previews/1211beed791bb0fc986626b101d9bcfda1ceda05c04ba31cc384ea2a4b65beef.html" class="internal ref fn" href="/braid-what\index.html#many_ps_to_p">many_ps_to_p</a> applied to the set obtained by mapping all sink vertices through <a data-preview="/previews/92348e7b66fcb7b2c54b30545edde7cdedb3bee901968f25b38a25560c6cf81f.html" class="internal ref fn" href="/braid-what\index.html#vertex_to_p">vertex_to_p</a>. Finally, we define <dfn><a id="braid_to_d" data-preview="/previews/990ca1057dfd4cbcb5bb850831e2f87260e15561576db90b16e408f7268bf312.html" class="internal fn" href="/braid-what\index.html#braid_to_d">braid_to_d</a></dfn> as applying <a data-preview="/previews/fc5598a7c3263be8f63ff27e586d245b72c4860110557ffeacce6756797a5524.html" class="internal ref fn" href="/braid-what\index.html#p_to_d">p_to_d</a> to the result of applying <a data-preview="/previews/990ca1057dfd4cbcb5bb850831e2f87260e15561576db90b16e408f7268bf312.html" class="internal ref fn" href="/braid-what\index.html#braid_to_d">braid_to_d</a> to some <a data-preview="/previews/892cedf0feb82b2594cb68f79a9ec6ce62a4508dc2250b7668ec4b1088b27296.html" class="internal ref type" href="/braid-what\index.html#Braid">Braid</a>.</p><p class="informative"><span class="aside">Now towards defining a proper CRDT. Violating the restrictions here seems like an easy way for adversarial peers to wreak havoc.</span>Let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing normal_text type"><span class="enclosing" id="B"><span class="enclosing" data-preview="/previews/c041217952d5fbcdf0b9d110c83ee71e5712390bb2034bbc71f83d789ad6e4a0.html"><a href="/braid-what\index.html#B"><span class="mord text"><span class="mord">B</span></span></a></span></span></span></span></span></span> be a non-empty family of <a data-preview="/previews/892cedf0feb82b2594cb68f79a9ec6ce62a4508dc2250b7668ec4b1088b27296.html" class="internal ref type" href="/braid-what\index.html#Braid">Braids</a> closed under graph union, such that we have for any two labeled graphs in <a data-preview="/previews/c041217952d5fbcdf0b9d110c83ee71e5712390bb2034bbc71f83d789ad6e4a0.html" class="internal ref type" href="/braid-what\index.html#B">B</a> that<ul><li>if some vertex (i.e., version) occurs in both graphs, they also have the same label, and</li><li>if some vertex (i.e., version) occurs in both graphs, then the set of edges <em>to</em> that vertex must be equal in both graphs.</li></ul></p><p class="informative">Claim: <a data-preview="/previews/c041217952d5fbcdf0b9d110c83ee71e5712390bb2034bbc71f83d789ad6e4a0.html" class="internal ref type" href="/braid-what\index.html#B">B</a> is a join-semilattice under graph union with respect to the subgraph relation.</p><p class="informative">And that is how I understand braid. Application developers are interested in obtaining a CRDT for <a data-preview="/previews/fd6930a9f56fda9ea4cc98c27290a14e8b5aa0fd18b4e63d92de5b4a05da05ed.html" class="internal ref type" href="/braid-what\index.html#D">D</a>, so they find a suitable set <a data-preview="/previews/bdf8d407010c2d41f3f438c55f60179beff233b612fe16dd75fedfa74db8d4a6.html" class="internal ref type" href="/braid-what\index.html#P">P</a> of patches, and the smallest possible <a data-preview="/previews/c041217952d5fbcdf0b9d110c83ee71e5712390bb2034bbc71f83d789ad6e4a0.html" class="internal ref type" href="/braid-what\index.html#B">B</a> such that every element of <a data-preview="/previews/fd6930a9f56fda9ea4cc98c27290a14e8b5aa0fd18b4e63d92de5b4a05da05ed.html" class="internal ref type" href="/braid-what\index.html#D">D</a> can be the result of reducing a <a data-preview="/previews/892cedf0feb82b2594cb68f79a9ec6ce62a4508dc2250b7668ec4b1088b27296.html" class="internal ref type" href="/braid-what\index.html#Braid">Braid</a> in <a data-preview="/previews/c041217952d5fbcdf0b9d110c83ee71e5712390bb2034bbc71f83d789ad6e4a0.html" class="internal ref type" href="/braid-what\index.html#B">B</a>; this then is the desired CRDT. I'm leaving out optimizations beyond the state-based formulation for now, but this seems to be it.</p><h2 id="map_crdt"><a href="#map_crdt">Example Map CRDT</a></h2><p class="informative">Goal: build a CRDT for partial functions with a fininte domain (aka maps/records) as a <a data-preview="/previews/c041217952d5fbcdf0b9d110c83ee71e5712390bb2034bbc71f83d789ad6e4a0.html" class="internal ref type" href="/braid-what\index.html#B">B</a> using the techniques of <a href="https://dl.acm.org/doi/pdf/10.1145/3380787.3393678" class="external">causal length sets</a>.</p><p class="informative">TODO</p><h2 id="braid_matter"><a href="#braid_matter">Matter</a></h2><p class="informative">Goal: to extend the <a data-preview="/previews/c041217952d5fbcdf0b9d110c83ee71e5712390bb2034bbc71f83d789ad6e4a0.html" class="internal ref type" href="/braid-what\index.html#B">B</a> CRDT with the double-acknowledgement mechanism of the antimatter algorithm, while staying in the framework of state-based CRDTs.</p><p class="informative">We can add history pruning for a static communication topology to the CRDT <a data-preview="/previews/c041217952d5fbcdf0b9d110c83ee71e5712390bb2034bbc71f83d789ad6e4a0.html" class="internal ref type" href="/braid-what\index.html#B">B</a> by labeling every vertex of a <a data-preview="/previews/892cedf0feb82b2594cb68f79a9ec6ce62a4508dc2250b7668ec4b1088b27296.html" class="internal ref type" href="/braid-what\index.html#Braid">Braid</a> with information about the knowledge of other peers regarding that vertex:</p><span class="aside">The intended semantics of <a data-preview="/previews/e0bc1b6238285602ca1697b86fe8ffdd089ec60ae8b2780b376f0400f65ab5b5.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckNone">None</a>, <a data-preview="/previews/4c59c8d16d65ef50adc2bbc59280b31fecc6fbc389ee01f2030030ab4d13ff19.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckLocal">Local</a>, and <a data-preview="/previews/14aaa5241eb28a4c1e43b94524956a0a4f15775f3f8df41b70a69b274420444d.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckGlobal">Global</a> cannot be taken for granted, but they follow from the algorithm by which peers update labels.</span><code class="pseudocode"><div class="item_spacing"></div><div class="loc"><span class="hl_kw"><span id="MatterAck">enum</span></span> <dfn><a id="MatterAck" class="internal type" href="/braid-what\index.html#MatterAck">MatterAck</a></dfn></div><div class="composite_type_def"><div class="loc"><div class="locindent"><div class="hl_doccom">The peer has had no confirmation that everyone knows of this vertex. (light color in the antimatter visualization)</div></div></div><div class="loc"><div class="locindent"><dfn><a id="MatterAckNone" class="internal symbol" href="/braid-what\index.html#MatterAckNone">None</a></dfn></div></div><div class="loc"><div class="locindent"><div class="hl_doccom">The peer knows that everyone knows of this vertex, but it has had no confirmation that everyone knows that everyone knows of this vertex. (dark color in the antimatter visualization)</div></div></div><div class="loc"><div class="locindent"><dfn><a id="MatterAckLocal" class="internal symbol" href="/braid-what\index.html#MatterAckLocal">Local</a></dfn></div></div><div class="loc"><div class="locindent"><div class="hl_doccom">The peer knows that everyone knows of this vertex, <em>and</em> the peer knows that everyone knows that everyone knows of this vertex. (gray color in the antimatter visualization)</div></div></div><div class="loc"><div class="locindent"><dfn><a id="MatterAckGlobal" class="internal symbol" href="/braid-what\index.html#MatterAckGlobal">Global</a></dfn></div></div></div><div class="item_spacing"></div><div class="loc"><span class="hl_kw"><span id="MatterLabel">struct</span></span> <dfn><a id="MatterLabel" class="internal type" href="/braid-what\index.html#MatterLabel">MatterLabel</a></dfn></div><div class="composite_type_def"><div class="loc"><div class="locindent"><dfn><a id="MatterLabelPatch" class="internal member" href="/braid-what\index.html#MatterLabelPatch">patch</a></dfn><span class="hl_punct">:</span> <a data-preview="/previews/bdf8d407010c2d41f3f438c55f60179beff233b612fe16dd75fedfa74db8d4a6.html" class="internal ref type" href="/braid-what\index.html#P">P</a></div></div><div class="loc"><div class="locindent"><dfn><a id="MatterLabelAck" class="internal member" href="/braid-what\index.html#MatterLabelAck">ack</a></dfn><span class="hl_punct">:</span> <a data-preview="/previews/29481d1e44c32be033249ba364c2580dbb332fbbeed89c62ab2404ed2292c3bd.html" class="internal ref type" href="/braid-what\index.html#MatterAck">MatterAck</a></div></div></div></code><p class="informative">We define a total order on <a data-preview="/previews/29481d1e44c32be033249ba364c2580dbb332fbbeed89c62ab2404ed2292c3bd.html" class="internal ref type" href="/braid-what\index.html#MatterAck">MatterAck</a>: <a data-preview="/previews/14aaa5241eb28a4c1e43b94524956a0a4f15775f3f8df41b70a69b274420444d.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckGlobal">Global</a> is greater than <a data-preview="/previews/4c59c8d16d65ef50adc2bbc59280b31fecc6fbc389ee01f2030030ab4d13ff19.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckLocal">Local</a> is greater than <a data-preview="/previews/e0bc1b6238285602ca1697b86fe8ffdd089ec60ae8b2780b376f0400f65ab5b5.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckNone">None</a>.</p><p class="informative">Defining a meaningful partial order on pruned CRDTs is rather tricky, so we define an unpruned (“raw”) CRDT first, and derive the ordering between pruned instances from the ordering between their unpruned counterparts.</p><p class="informative">A <dfn><a id="RawMatterBraid" data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a></dfn> is a non-empty, finite, labeled DAG, whose vertices are a subset of <a data-preview="/previews/6d8314549e5962609691785696d96bf2fe0f20fcb1951918ddce5d700b922656.html" class="internal ref type" href="/braid-what\index.html#Id">Id</a>, whose vertices have an in-degree of at most two, and whose labels are <a data-preview="/previews/e24b405e4be7f0639f774dfa236a9cb1bff1a469e46013e43fe593a6f770a68c.html" class="internal ref type" href="/braid-what\index.html#MatterLabel">MatterLabels</a> such that for any two vertices <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span> and <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>: if <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> reachable from <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">u</span><span class="enclosing normal_text"><span class="mord text"><span class="mord">,</span></span></span></span></span></span> then the <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">ack</a> of the label of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span> is greater than or equal to the <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">ack</a> of the label of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>.</p><p class="informative">We define the <dfn><a id="raw_matter_braid_join" data-preview="/previews/b694990904b5826dbb50d9c336c7a902f93c28f43753b13bd5132bcbc4178518.html" class="internal fn" href="/braid-what\index.html#raw_matter_braid_join">raw_matter_braid_join</a></dfn> of two <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraids</a> as the <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> whose DAG is the graph union of the DAGs of the two inputs, and whose labeling function is the union of the two labeling functions, where the greater <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck"> wins in case of a conflict.</a></p><p class="informative">We further define a partial order on <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraids</a>: a <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is less than or equal to a <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> if <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is a (not necessarily strict) subgraph of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="enclosing normal_text"><span class="mord text"><span class="mord">,</span></span></span></span></span></span> and for each vertex of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="enclosing normal_text"><span class="mord text"><span class="mord">,</span></span></span></span></span></span> the <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">ack</a> of that vertex in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is less than or equal to the <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">ack</a> of that vertex in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="enclosing normal_text"><span class="mord text"><span class="mord">.</span></span></span></span></span></span></p><p class="informative">Let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing normal_text type"><span class="enclosing" id="RawMB"><span class="enclosing" data-preview="/previews/2746678e3113bbd807a2830728684c86217b57a290900323e8861505205ed6f6.html"><a href="/braid-what\index.html#RawMB"><span class="mord text"><span class="mord">RawMB</span></span></a></span></span></span></span></span></span> be a non-empty family of <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraids</a> closed under graph union, such that we have for any two labeled graphs in <a data-preview="/previews/2746678e3113bbd807a2830728684c86217b57a290900323e8861505205ed6f6.html" class="internal ref type" href="/braid-what\index.html#RawMB">RawMB</a> that<ul><li><span class="aside">Another exciting way for adversarial peers to wreak havoc.</span>if some vertex (i.e., version) occurs in both graphs, the labels in both graphs have the same <a data-preview="/previews/6d87fca38c48b8a05ac013f228948d044dd009879764eadf06ea694a6556ce65.html" class="internal ref member" href="/braid-what\index.html#MatterLabelPatch">patch</a>, and</li><li>if some vertex (i.e., version) occurs in both graphs, then the set of edges <em>to</em> that vertex must be equal in both graphs.</li></ul></p><p class="informative">Claim: <a data-preview="/previews/2746678e3113bbd807a2830728684c86217b57a290900323e8861505205ed6f6.html" class="internal ref type" href="/braid-what\index.html#RawMB">RawMB</a> is a join-semilattice under <a data-preview="/previews/b694990904b5826dbb50d9c336c7a902f93c28f43753b13bd5132bcbc4178518.html" class="internal ref fn" href="/braid-what\index.html#raw_matter_braid_join">raw_matter_braid_join</a>.</p><h3 id="maintaining_acks"><a href="#maintaining_acks">Maintaining Acks</a></h3><p class="informative"><span class="aside">This section is quite horribly written, my apologies =/ You can safely jump to the final paragraph of this section if you don't want the full details.</span>Toward proper pruning, we need to consider how to maintain <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">acks</a>. We assume some application runing on a node in a connected network with a static topology. The application codes against an interface that presents <a data-preview="/previews/892cedf0feb82b2594cb68f79a9ec6ce62a4508dc2250b7668ec4b1088b27296.html" class="internal ref type" href="/braid-what\index.html#Braid">Braids</a> from <a data-preview="/previews/c041217952d5fbcdf0b9d110c83ee71e5712390bb2034bbc71f83d789ad6e4a0.html" class="internal ref type" href="/braid-what\index.html#B">B</a> and allows for adding new vertices with an application-determined patch as a label, whose in-neighbors are sinks. Internally, this gets translated into maintenance of <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraids</a> from <a data-preview="/previews/2746678e3113bbd807a2830728684c86217b57a290900323e8861505205ed6f6.html" class="internal ref type" href="/braid-what\index.html#RawMB">RawMB</a>.</p><p class="informative">When the application adds a new vertex, the internal <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> uses the application-specified patch as the <a data-preview="/previews/6d87fca38c48b8a05ac013f228948d044dd009879764eadf06ea694a6556ce65.html" class="internal ref member" href="/braid-what\index.html#MatterLabelPatch">patch</a> of the vertex label, and sets the <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">ack</a> to <a data-preview="/previews/e0bc1b6238285602ca1697b86fe8ffdd089ec60ae8b2780b376f0400f65ab5b5.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckNone">None</a>. The node then sends the <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> to its neighbors.</p><p class="informative">Whenever a node receives a <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> from a neighbor, it updates its <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a>  to the <a data-preview="/previews/b694990904b5826dbb50d9c336c7a902f93c28f43753b13bd5132bcbc4178518.html" class="internal ref fn" href="/braid-what\index.html#raw_matter_braid_join">raw_matter_braid_join</a> of its old <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> and the newly received <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a>.</p><p class="informative">Whenever a node receives (whether from a neighbor or the application) a <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> that contains a vertex the node did not have before, it forwards its <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> (after joining) to all its other neighbors (<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">ll</span></span></span></span> neighbors, if it was received from the application). Additionally, the node tracks some state: it adds a mapping from the new vertex to the information where it received the <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> from, and a mapping from the new vertex to a zero-initialized counter. If the node has no neighbors from which it did not receive the <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a>, then it </p><p class="informative">Whenever the node receives a <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> from a neighbor that labels the new vertex with <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">ack</a> <a data-preview="/previews/e0bc1b6238285602ca1697b86fe8ffdd089ec60ae8b2780b376f0400f65ab5b5.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckNone">None</a>, it increments the counter. When the counter reaches one less than the number of neighbors (or one less if the <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> did not stem from the local application), and the <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">ack</a> of the local label of the vertex is <a data-preview="/previews/e0bc1b6238285602ca1697b86fe8ffdd089ec60ae8b2780b376f0400f65ab5b5.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckNone">None</a> after joining, it changes the <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">ack</a> of the local label of the vertex to <a data-preview="/previews/4c59c8d16d65ef50adc2bbc59280b31fecc6fbc389ee01f2030030ab4d13ff19.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckLocal">Local</a>.</p><p class="informative">Whenever a node sets the <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">ack</a> of a local label to <a data-preview="/previews/4c59c8d16d65ef50adc2bbc59280b31fecc6fbc389ee01f2030030ab4d13ff19.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckLocal">Local</a> for the first time, it sends its new <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> to all neighbors, except the neighbor who triggered the change (if there is one). If there is none, and the node originally received the vertex from its application, then it instead updates the <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">ack</a> of the local label of the vertex to <a data-preview="/previews/14aaa5241eb28a4c1e43b94524956a0a4f15775f3f8df41b70a69b274420444d.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckGlobal">Global</a>, and then sends its <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> to all it neighbors.</p><p class="informative">Whenever a node sets the <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">ack</a> of a local label to <a data-preview="/previews/14aaa5241eb28a4c1e43b94524956a0a4f15775f3f8df41b70a69b274420444d.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckGlobal">Global</a> for the first time, it sends its new <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> to all neighbors, except the neighbor who triggered the change (if there is one).</p><p class="informative">Claim: If all nodes follow these rules for maintaining <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">acks</a>, then the following statements are true:<ul><li>If the <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">ack</a> of a vertex is <a data-preview="/previews/4c59c8d16d65ef50adc2bbc59280b31fecc6fbc389ee01f2030030ab4d13ff19.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckLocal">Local</a> at at least one node, then the local <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> of <em>every</em> node contains that vertex.</li><li>If the <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">ack</a> of a vertex is <a data-preview="/previews/14aaa5241eb28a4c1e43b94524956a0a4f15775f3f8df41b70a69b274420444d.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckGlobal">Global</a> at at least one node, then the <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">ack</a> of that vertex at <em>every</em> node is greater than or equal to <a data-preview="/previews/4c59c8d16d65ef50adc2bbc59280b31fecc6fbc389ee01f2030030ab4d13ff19.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckLocal">Local</a>.</li></ul></p><h3 id="pruning"><a href="#pruning">Pruning State</a></h3><p class="informative">Now, we can define pruning: a <dfn><a id="MatterBraid" data-preview="/previews/6f6e510ac6b5cb05503fd10e0cd49b700454a6d3e2b37268f43bdad4007c6ba2.html" class="internal type" href="/braid-what\index.html#MatterBraid">MatterBraid</a></dfn> is a <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> in which no non-sink vertex whose <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">ack</a> is <a data-preview="/previews/14aaa5241eb28a4c1e43b94524956a0a4f15775f3f8df41b70a69b274420444d.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckGlobal">Global</a> has only out-neighbors whose <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">ack</a> is <a data-preview="/previews/14aaa5241eb28a4c1e43b94524956a0a4f15775f3f8df41b70a69b274420444d.html" class="internal ref symbol" href="/braid-what\index.html#MatterAckGlobal">Global</a> as well. We define <dfn><a id="matter_prune" data-preview="/previews/23a2b392c8936cb5a4af2a913d733e3c6df13ca89a8febda0a9c54c4959c55f1.html" class="internal fn" href="/braid-what\index.html#matter_prune">matter_prune</a></dfn> as the function that recursively eliminates all non-sink sources from a <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraid</a> that violate the <a data-preview="/previews/6f6e510ac6b5cb05503fd10e0cd49b700454a6d3e2b37268f43bdad4007c6ba2.html" class="internal ref type" href="/braid-what\index.html#MatterBraid">MatterBraid</a> criterium.<span class="aside">There's a mistake right here, it does not suffice to simply elimintate the old vertices, but you also have to propagate their labels into their out-neighbors. Probably via <a data-preview="/previews/ed4c5f07be820ddd01e14b3693e8fb7332de4073f375541be3094a1ae1d5c1aa.html" class="internal ref fn" href="/braid-what\index.html#pp_to_p">pp_to_p</a>? Not entirely sure right now which additional requirements that imposes on the <code>x_to_p</code> family of functions. Adding a marginale instead of properly fixing it because lack of time.</span></p><p class="informative">We define <dfn><a id="matter_braid_join" data-preview="/previews/fb490dca6fa6aef3e4f0545a5bf7bc7f3fee9a5057bcc4c824ac560db1b90823.html" class="internal fn" href="/braid-what\index.html#matter_braid_join">matter_braid_join</a></dfn> as a function that takes two <a data-preview="/previews/6f6e510ac6b5cb05503fd10e0cd49b700454a6d3e2b37268f43bdad4007c6ba2.html" class="internal ref type" href="/braid-what\index.html#MatterBraid">MatterBraids</a>, computes their <a data-preview="/previews/b694990904b5826dbb50d9c336c7a902f93c28f43753b13bd5132bcbc4178518.html" class="internal ref fn" href="/braid-what\index.html#raw_matter_braid_join">raw_matter_braid_join</a>, and applies <a data-preview="/previews/23a2b392c8936cb5a4af2a913d733e3c6df13ca89a8febda0a9c54c4959c55f1.html" class="internal ref fn" href="/braid-what\index.html#matter_prune">matter_prune</a> to the result.</p><p class="informative">Let <dfn><a id="MB" data-preview="/previews/8c7651fc0f4c762d729810b2b83e308ffcca49c782e994cf50e07e2763bb1d52.html" class="internal type" href="/braid-what\index.html#MB">MB</a></dfn> be the set of <a data-preview="/previews/6f6e510ac6b5cb05503fd10e0cd49b700454a6d3e2b37268f43bdad4007c6ba2.html" class="internal ref type" href="/braid-what\index.html#MatterBraid">MatterBraids</a> obtained by mapping all elements of <a data-preview="/previews/2746678e3113bbd807a2830728684c86217b57a290900323e8861505205ed6f6.html" class="internal ref type" href="/braid-what\index.html#RawMB">RawMB</a> through <a data-preview="/previews/23a2b392c8936cb5a4af2a913d733e3c6df13ca89a8febda0a9c54c4959c55f1.html" class="internal ref fn" href="/braid-what\index.html#matter_prune">matter_prune</a>.</p><p class="informative">Claim: <a data-preview="/previews/8c7651fc0f4c762d729810b2b83e308ffcca49c782e994cf50e07e2763bb1d52.html" class="internal ref type" href="/braid-what\index.html#MB">MB</a> is a join-semilattice under <a data-preview="/previews/fb490dca6fa6aef3e4f0545a5bf7bc7f3fee9a5057bcc4c824ac560db1b90823.html" class="internal ref fn" href="/braid-what\index.html#matter_braid_join">matter_braid_join</a> with respect to the ordering that <a data-preview="/previews/8c7651fc0f4c762d729810b2b83e308ffcca49c782e994cf50e07e2763bb1d52.html" class="internal ref type" href="/braid-what\index.html#MB">MB</a> inherits from <a data-preview="/previews/2746678e3113bbd807a2830728684c86217b57a290900323e8861505205ed6f6.html" class="internal ref type" href="/braid-what\index.html#RawMB">RawMB</a>.</p><p class="informative">Claim: nodes can maintain <a data-preview="/previews/6f6e510ac6b5cb05503fd10e0cd49b700454a6d3e2b37268f43bdad4007c6ba2.html" class="internal ref type" href="/braid-what\index.html#MatterBraid">MatterBraids</a> analogously to how they maintain <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraids</a>, and then the same <a data-preview="/previews/a58fe062aab022f0afb28d59cd4cec61c481bd0edc6e45a4a461134bdf49e828.html" class="internal ref member" href="/braid-what\index.html#MatterLabelAck">acks</a> semantics hold.</p><p class="informative">Let us hand-wavily define an <dfn><a id="execution" data-preview="/previews/57764ee1180978d5249914e7d17db8605364f1d1f9f97fdd7920eedbdafb8fe8.html" class="internal def" href="/braid-what\index.html#execution">execution</a></dfn> as the evolution of the results of reducing the state of each node in a network into the domain <a data-preview="/previews/fd6930a9f56fda9ea4cc98c27290a14e8b5aa0fd18b4e63d92de5b4a05da05ed.html" class="internal ref type" href="/braid-what\index.html#D">D</a>, as a function of the network topology, a sequence API calls of the applications, and message delivery times.</p><p class="informative">Claim: The execution for a given topology, sequence of API calls, and message delivery times are equal regardless of whether the nodes maintain and transmit <a data-preview="/previews/80c85a3b41b3234c3327abf0a653c0087294b882854700ec726ac1faed522002.html" class="internal ref type" href="/braid-what\index.html#RawMatterBraid">RawMatterBraids</a> or <a data-preview="/previews/6f6e510ac6b5cb05503fd10e0cd49b700454a6d3e2b37268f43bdad4007c6ba2.html" class="internal ref type" href="/braid-what\index.html#MatterBraid">MatterBraids</a>.</p><h2 id="antimatter"><a href="#antimatter">Antimatter</a></h2><p class="informative">Goal: to extend the <a data-preview="/previews/8c7651fc0f4c762d729810b2b83e308ffcca49c782e994cf50e07e2763bb1d52.html" class="internal ref type" href="/braid-what\index.html#MB">MB</a> CRDT with the mechanisms of the antimatter algorithm for handling dynamic topology, while staying in the framework of state-based CRDTs.</p><p class="informative">TODO</p></main></div></body></html>